<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
      body { font-family: sans-serif; padding: 20px; }
      input, button { margin-top: 10px; width: 100%; }
    </style>
  </head>
  <body>
    <h2>Invite Form</h2>
    <div id="user-id">Loading...</div>
    <form id="form">
      <input type="text" name="code" placeholder="Your invitation code" required />
      <button type="submit">Submit</button>
    </form>

    <script>
       window.onload = function() {
    const user = Telegram.WebApp.initDataUnsafe.user;
    if (user) {
      const userId = user.id;
      document.getElementById('user-id').textContent = `User ID: ${userId}`;
    } else {
      document.getElementById('user-id').textContent = 'User info not available';
    }
  };
      const tg = window.Telegram.WebApp;
      tg.expand();

      document.getElementById("form").addEventListener("submit", e => {
        e.preventDefault();
        const data = {
          message:"fromWebApp",
          code: e.target.code.value,
          user_id: tg.initDataUnsafe.user?.id
        };
        tg.sendData(JSON.stringify(data));
        tg.close();
      });
    </script>
    
  </body>
</html>
